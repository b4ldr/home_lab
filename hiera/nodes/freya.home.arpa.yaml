prometheus::manage_prometheus_server: true
prometheus::version: '2.0.0'
prometheus::alerts:
  groups:
    - name: 'alert.rules'
      rules:
        - alert: 'InstanceDown'
          expr: 'up == 0'
          for: '5m'
          labels:
            severity: 'page'
          annotations:
            summary: 'Instance {{ $labels.instance }} down'
            description: '{{ $labels.instance }} of job {{ $labels.job }} has been
              down for more than 5 minutes.'
prometheus::scrape_configs:
  - job_name: 'node'
    scrape_interval: '5s'
    scrape_timeout: '5s'
    static_configs:
      - targets:
        - '127.0.0.1:9100'
        labels:
          alias: 'freya'
  - job_name: 'victron'
    scrape_interval: '5s'
    scrape_timeout: '5s'
    static_configs:
      - targets:
        - '127.0.0.1:9226'
        labels:
          alias: 'victron CC GX'
grafana::provisioning_datasources:
  apiVersion: 1
  datasources:
    - name: 'Prometheus'
      type: 'prometheus'
      access: 'proxy'
      url: 'http://127.0.0.1:9090'
      isDefault: true
